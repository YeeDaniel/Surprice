<template>
  <div
    class="relative mb-3 flex w-full items-start rounded-xl bg-white p-3 shadow-sm cursor-pointer hover:shadow-md transition duration-200"
  >
    <!-- åœ–ç‰‡ -->
    <div class="relative h-20 w-20 shrink-0 overflow-hidden rounded-md">
      <img :src="store.image" class="h-full w-full object-cover" />
      <div
        class="absolute bottom-0 left-0 w-full bg-green bg-opacity-75 text-center text-xs text-white py-0.5"
      >
        å‰©é¤˜{{ store.remaining }}ä»½
      </div>
    </div>

    <!-- å³å´è³‡è¨Šå€å¡Š -->
    <div class="ml-4 flex flex-1 justify-between">
      <!-- å·¦å€å¡Šï¼šæ¨™é¡Œèˆ‡è³‡è¨Š -->
      <div class="flex flex-col justify-center">
        <h3 class="text-base font-bold text-gray-800">{{ store.name }}</h3>
        <p class="text-xs text-gray-500 mt-1">ğŸ± {{ store.category }}</p>
        <p class="text-xs text-gray-500">ğŸ“ è·é›¢ä½  {{ store.distance }}</p>
        <p class="text-xs text-gray-500">ğŸ•’ {{ store.time }}</p>
      </div>

      <!-- å³å€å¡Šï¼šæŠ˜æ‰£èˆ‡åƒ¹æ ¼ -->
      <div class="flex flex-col items-end justify-end ml-4 mt-auto">
        <span class="text-sm font-bold text-orange-500">{{
          store.discount
        }}</span>
        <span class="text-sm font-bold text-gray-800"
          >æœ€ä½ ${{ store.price }}</span
        >
      </div>
    </div>

    <!-- æ”¶è— iconï¼šå³ä¸Š -->
    <button @click.stop="toggleFavorite" class="absolute right-3 top-3">
      <img
        :src="store.isFavorite ? '/heartFilled.png' : '/heartOutline.png'"
        class="h-5 w-5"
        alt="favorite"
      />
    </button>
  </div>
</template>

<script setup>
const props = defineProps({
  store: {
    type: Object,
    required: true,
  },
});
const emit = defineEmits(["update:favorite"]);

const toggleFavorite = () => {
  emit("update:favorite", props.store.id);
};
</script>
